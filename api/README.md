# 重复的代码或者接口

```
重复代码是在同一文件中或有时在同一本地环境中重复一行或一段代码。人们可能认为代码重复是可以接受的，但实际上，它给您的软件带来的问题比您想象的要大。甚至具有相似功能的代码也被称为重复。



顾名思义，重复代码是在同一文件中或有时在同一本地环境中重复一行或一段代码。人们可能认为代码重复是可以接受的，但实际上，它给您的软件带来的问题比您想象的要大。甚至具有相似功能的代码也被称为重复。

创建重复代码的主要原因是复制和粘贴编程。开发人员通过评论这部分代码适用于程序来证明这种剽窃行为的合理性，并使其看起来原始修改代码的变量和体系结构。他们忽略了他们搜索的大多数程序都是出于学术目的而不是为了商业开发而制作的。因此它们包含冗余数据，以便程序易于理解。

效率在学术环境中是最后的偏好，而在商业领域则是第一。开发人员使用复制粘贴编程也是因为他们不太了解该语言。让我们谈谈代码重复损害软件开发的 4 种主要方式
```


代码重复有害的四大原因：
```
代码重复有害的四大原因：
1. 重复代码使您的程序冗长而庞大：
许多程序员认为，如果软件工作正常，就没有理由修复代码重复。您忘记了您只是不必要地使您的软件变得庞大。您的论点可能是一些代码块只需要几毫秒即可运行。我们同意，但前提是您打算多次使用您的软件。为商业目的或 Web 应用程序编写的代码每分钟执行成千上万次。

每毫秒的延迟都会导致用户本地计算机和服务器的延迟和空间需求更大。编写良好且重复最少的代码将确保您的程序运行得更快并占用更少的空间。此外，当人们不想等待时，年龄已经过去了。现在一切都需要快速而顺利。

 

2. 重复会降低你的代码质量：
只要您打算尽快扔掉您的软件，复制就可以了。代码质量 是使您的软件长期存在的必要条件。重复的代码会让你的代码很臭，并增加与之相关的技术债务。修复该债务的成本是支付给开发商以简化或去重所需的资金和时间。兴趣是开发人员的生产力下降。

有时重构重复的代码块是不可能的，但目标应该是减少尽可能多的技术债务。它有助于使您的代码质量更高。

图像显示删除重复代码并在代码上显示创可贴
3. 霰弹枪手术：
假设您编写了错误的代码。您进行代码审查以找出问题，然后修复它。现在用重复的错误代码替换这种错误代码场景。您现在必须修复代码所在的每个位置，从而浪费您的时间、效率，有时甚至是脾气。这种情况被称为反向霰弹枪手术，对于任何开发人员来说都是非常讨厌的。

 

4. 增加安全风险：
好吧，这更像是一个复制和粘贴编程问题，而不是重复代码，但就像大多数时候通过使用复制粘贴过程产生重复代码一样，它值得一提。当有人从某个地方获取代码并添加到他们的软件中时，他们会忘记抄袭代码的漏洞和结局。重复的代码为攻击者留下了漏洞利用并进入您的代码，使其易受攻击。

以下是 Codegrip 如何帮助您在项目中查找重复代码
```

### 怎么避免重复的代码

```go
如何检测代码重复？
到目前为止，您可能已经确信重复代码对您的软件有害。但是如何检查您的软件是否有重复代码？毕竟，它由多个文件和每个文件中的 100 行代码组成。逐行遍历听起来不是一个可行的解决方案，除非它只是一个包含几行代码的文件。

这是自动化工具派上用场的地方。通过使用 Codegrip 等代码审查工具，无论文件数量或代码行数如何，您都可以在几秒钟内找到重复项。Codegrip 不仅显示重复百分比，还显示它所在的文件及其行号以及重复代码块的文件路径和行号。除了重复之外，Codegrip 还显示了错误、代码气味安全漏洞和代码库的代码覆盖率。


不要重复自己（干）：
由于重复代码涉及严重的风险和挑战，有一种著名的减少重复代码的方法。使用DRY或不要重复自己的原则，您可以确保尽可能远离重复代码。而是用抽象替换重复的代码或使用数据规范化。为了减少函数中的重复性，可以使用循环和树。



虽然 DRY 作为一个可以应用于大多数类型的重复代码的系统出现，但在某些地方它变得有必要重复。就像在许多情况下使用 JAVA 语言一样。由于他们的 WET 或We enjoy Typing编程方法，铁杆编码员在维护 DRY 原则方面也存在问题。但即使你喜欢打字，WET原则也只是转化为浪费每个人的时间。



如何删除重复代码？
重复的代码行应替换为单个方法。因此，解决方法是提取方法并委托给常见行为。



如果重复代码出现在：

相同的方法，创建相同的局部变量并重用它。
同一个类，创建通用方法重构。
同一层次结构的子类，您应该提取方法并将其拉起。
两个不同的类，可以使用对象。


具有相似算法的模块最难找到，因为没有重复检测器可以找到它们。一个解决方案是使用设计模式。模板方法设计模式可以应用于来自同一类层次结构的算法。而策略设计模式可以应用于不同类层次结构中使用的算法。应该使用多态性来代替用于测试相同条件的 switch case 和 if-else。



删除重复代码的优点
合并重复的代码行可以简化代码结构并减小文件大小。
随着时间的推移，它还增加了代码的可维护性并减少了技术债务。
减少安全漏洞的数量。
它使您的代码保持干净，从而有助于更快地提供功能支持和新更新。


什么时候可以忽略重复？
在极少数情况下，您希望忽略重复代码。我建议将您的重复百分比保持在最低水平。每家公司都有自己的复制百分比阈值，以符合其质量标准。

加起来
0% 的重复是非常困难的，并且随着源代码文件数量的增加而变得更加困难。最重要的是遵循适当的编码标准，如 DRY，并建立有效的代码审查流程。及时进行代码审查很重要，以免以后增加技术债务。即使您将项目外包，您也需要检查重复项，因为最终维护和更新软件是您的责任。
```

https://www.codegrip.tech/productivity/what-is-duplicate-code/
